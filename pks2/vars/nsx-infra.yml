---
nsxt_admin_username: admin
nsxt_admin_password: ((nsx_admin_password))
nsxt_manager: https://nsxmgr.ragazzilab.com

logical_switches:
- name: PKS2-MGMT
  transport_zone_name: tz-overlay


t1_logical_routers:
- name: "t1-pks2-mgmt"
  t0_name: "t0-core"
  edgecluster_name: ""
  downlinks:
    - logical_switch_name: "PKS2-MGMT"
      router_port_cidr: "10.16.12.1/24"


t0_nat_rules:
# must have a name
- name: opsman-dnat # DNAT to reach Ops Mgr
  t0_name: t0-core
  action: DNAT
  source: Any
  dest: 192.168.105.15
  trans: 10.16.12.10
  priority: 1010
- name: director-dnat # DNAT to reach BOSH Direector
  t0_name: t0-core
  action: DNAT
  source: Any
  dest: 192.168.105.16
  trans: 10.16.12.12
  priority: 1010
- name: pks-controller-dnat # DNAT to reach BOSH Direector
  t0_name: t0-core
  action: DNAT
  source: Any
  dest: 192.168.105.17
  trans: 10.16.12.13
  priority: 1010
- name: harbor-dnat # DNAT to reach BOSH Direector
  t0_name: t0-core
  action: DNAT
  source: Any
  dest: 192.168.105.18
  trans: 10.16.12.14
  priority: 1010
- name: infra-snat-mgmt # SNAT for infra network to reach DNS, vCenter, etc
  t0_name: t0-core
  action: SNAT
  source: 10.16.12.0/24
  dest: 192.168.100.0/24
  trans: 192.168.105.4
  priority: 1010
- name: infra-snat-esxi # SNAT for infra to reach ESXi hosts
  t0_name: t0-core
  action: SNAT
  source: 10.16.12.0/24
  dest: 192.168.97.0/24
  trans: 192.168.105.4
  priority: 1010
# - name: nodes-snat-mgmt # SNAT for Nodes blockto reach DNS, NTP, etc
#   t0_name: t0-core
#   action: SNAT
#   source: 10.17.0.0/16
#   dest: 192.168.100.0/24
#   trans: 192.168.105.5
#   priority: 1002
# - name: pods-snat-mgmt # SNAT for Nodes blockto reach DNS, NTP, etc
#   t0_name: t0-core
#   action: SNAT
#   source: 10.18.0.0/16
#   dest: 192.168.100.0/24
#   trans: 192.168.105.6
#   priority: 1002

ip_blocks:
# Reuse Existing Blocks
# - name: PKS-Nodes-Block
#   cidr: 10.17.0.0/16
#   description: "A /24 subnet from the Nodes IP Block will be extracted and allocated for the Kubernetes master and worker nodes."
# - name: PKS-Pods-Block
#   cidr: 10.18.0.0/16
#   description: "A /24 subnet from the Pods IP Block will be extracted and allocated for each Kubernetes namespace"


ip_pools:
- name: PKS2-FLOATING-IP-POOL
  cidr: 192.168.105.0/24
  description: "This network provides your load balancing address space for each Kubernetes cluster created by Enterprise PKS. The network also provides IP addresses for Kubernetes API access and Kubernetes exposed services"
  gateway: 192.168.105.1
  range: 192.168.105.129-192.168.105.159
  dns_servers: 192.168.100.50,192.168.100.150

load-balancers:
